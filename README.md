# [Backstage](https://backstage.io) example instance for debugging [issue #18060](https://github.com/backstage/backstage/issues/18060)

To start the app, run:

```sh
yarn install
GITHUB_CLIENT_ID=... GITHUB_CLIENT_SECRET=... BACKEND_SECRET=... yarn dev

```

Github client and secret can be generated by following [this instructions](https://backstage.io/docs/getting-started/configuration#setting-up-authentication). The backend secret can be a random base64 string.

Inside the instance search functionality will work as expected, since a user
token is provided, but a tokenless call will result in an empty answer (ie.
`curl http://localhost:7007/api/search/query\?term\=`).

By disabling permissions, switching permission enabled flag from `true` to
`false` on the bottom of [app-config.yaml](./app-config.yaml) a tokenless call
to search will now result in a full answer.

More detail on the permission policy can be found [here](./packages/backend/src/plugins/permission.ts).

All logged users are part of guests and own what the guest user owns, more
details can be found in the [auth plugin](packages/backend/src/plugins/auth.ts).
